<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Time Series Charts</title>
    <link rel="stylesheet" type="text/css" href="styles/fullpage.min.css">
    <link rel="stylesheet" type="text/css" href="styles/styles.css">
</head>
<body>
    <div id="fullpage">
        <div class="section">
            <div class="slide" data-anchor="2014">
                <h2>Chart for 2014</h2>
                <div id="chart-2014" class="chart-container"></div>
            </div>
            <div class="slide" data-anchor="2015">
                <h2>Chart for 2015</h2>
                <div id="chart-2015" class="chart-container"></div>
            </div>
            <div class="slide" data-anchor="2016">
                <h2>Chart for 2016</h2>
                <div id="chart-2016" class="chart-container"></div>
            </div>
            <div class="slide" data-anchor="slider">
                <h2>Chart with Date Slider</h2>
                <div>
                    <label for="start-date">Start Date:</label>
                    <input type="date" id="start-date" name="start-date">
                    <label for="end-date">End Date:</label>
                    <input type="date" id="end-date" name="end-date">
                    <button id="update-chart">Update Chart</button>
                </div>
                <div id="chart-slider" class="chart-container"></div>
            </div>
        </div>
    </div>

    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="scripts/scrolloverflow.min.js"></script>
    <script src="scripts/fullpage.min.js"></script>
    <script src="js/chart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            new fullpage('#fullpage', {
                scrollOverflow: true,
                navigation: true,
                navigationPosition: 'right',
                onLeave: function(origin, destination, direction) {
                    const charts = {
                        1: ['2014-01-01', '2014-12-31', 'chart-2014'],
                        2: ['2015-01-01', '2015-12-31', 'chart-2015'],
                        3: ['2016-01-01', '2016-12-31', 'chart-2016']
                    };
                    if (charts[destination.index + 1]) {
                        const [start, end, scene] = charts[destination.index + 1];
                        d3.select(`#${scene}`).selectAll("*").remove();
                        chart(start, end, scene);
                    }
                }
            });

            document.getElementById('update-chart').addEventListener('click', function() {
                const startDate = document.getElementById('start-date').value;
                const endDate = document.getElementById('end-date').value;
                if (startDate && endDate) {
                    d3.select("#chart-slider").selectAll("*").remove();
                    chart(startDate, endDate, 'chart-slider');
                } else {
                    alert("Please select both start and end dates.");
                }
            });
        });
    </script>
</body>
</html>
